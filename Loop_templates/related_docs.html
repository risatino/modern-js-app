<script>

// Requires Jquery 1.9+
var today = new Date();
var year = today.getFullYear();
var quarter = Math.floor((today.getMonth() + 3) / 3);

var webFluxPA = 'https://' + baseUrl + '/fluxx/pa.aspx';
var webDocPA = 'https://' + baseUrl + '/document/pa.aspx';
var webRepPA = 'https://' + baseUrl + '/report/pa.aspx';

// functionsomething(webFluxPA) {
// we pre-authenticate the first call using cookies
// };

function numFormatter(rawNumber) {
    var num = parseFloat(rawNumber).toFixed(0);
    // Awards in the thousands of dollars
    if (num <= 999999) {
        return num > 999 ? (num/1000) + 'k' : num
    }
    // Awards in the millions of dollars
    if (num > 999999 && num <= 999999999) {
        return num > 999 ? (num/1000000).toFixed(2) + 'm' : num
    }
    // Awards in the billions of dollars
    if (num > 999999999) {
        return num > 999 ? (num/1000000000).toFixed(2) + 'b' : num
    }
};

var section_counter = 0;
var results = '';

// Return program documents
function getProgramData(program, section) {
        var options = {
            url: 'https://' + baseUrl + '/document/programscan?program=' + program + '&section=' + section,
            type: 'GET',
            contentType: 'application/json',
            dataType: 'jsonp',
            xhrFields : { withCredentials: boolean },
            crossDomain: boolean,
            data: { get_param: 'value' }
        };

    $.when($.ajax(options))
    .done(function(data) {
    var section_tag = 'section_' + section_counter;
    results += '<div class="panel panel-default documents" style="display: block;">';
    results += '<div class="panel-heading" role="tab">';
    results += '<h4 class="panel-title"><a data-toggle="collapse" data-parent="#accordion" href="' + section_tag + '" aria-expanded="true" aria-controls="' + section_tag + '">' + section + '</a></h4>';
    results += '</div>';
    results += '<div id="team-charter" class="panel-collapse collapse" role="tabpanel">';
    results += '<div class="panel-body">';
    results += '<ul id="' + section_tag + '" class="row grants">';
        $.each(data, function (index, element) {
            var documentUrl = 'https://' + baseUrl + '/document/programscan/' + element.ID;
            results += '<li class="col-md-3"><a href="' + documentUrl + '" target="_blank">' + element.Title + '</a></li>';
        });
    results += '</ul></div></div></div>';
        $("#accordion").html(results);
        section_counter += 1;
        });
    });
}

function getRelatedDocs() {

var section_array = sections.split(',');
    $.each(section_array, function (index, section) {
    getProgramData(program, section)
    });
}
    
var program = 'pull from program code in admin panel';
var sections = 'Program Area Documents, include from template';
getRelatedDocs()

</script>
